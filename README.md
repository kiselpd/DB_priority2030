# API для работы с PostgreSQL
Данный микросервис был разработан в рамках программы МГТУ им. Н.Э.Баумана "Приоритет 2030". Он входит в проект, который осуществляет контроль, прогнозирование и анализирование энергоресурсов.

## Содержание
- [Технологии](#технологии)
- [Установка библиотек](#установка-библиотек)
- [Файл конфигурации](#файл-конфигурации)
- [Принцип работы](#принцип-работы)
- [Запуск](#запуск)
- [Автор](#автор)

## Технологии
- Rest API
- JWT
- C++
- boost 
- libpqxx

## Установка библиотек
Установите необходимые библиотеки с помощью команд:
```sh
    sudo apt update
    sudo apt install build-essential cmake libboost-all-dev libpqxx-dev libconfig-dev
```

## Файл конфигурации
```sh
application:
{
    database:
    {
        host = ""; #ip на котором располагается БД
        port = ""; #порт доступа(обычно 5432 для PostgreSQL)
        user = ""; #Пользователь(обычно postgres)
        password = ""; #Пароль
        name = ""; #Имя БД
        pool_size = 10; #Размер пула соединений с БД
    };
    acceptor:
    {
        port = 4000; #порт принимающий подключения к API
    };

    jwt:
    {
        secret = ""; #Secret Word для генерации JWT токена
        algo = [""]; #Алгоритмы использующиеся для JWT
    };
};
```
## Принцип работы
Для авторизации необходимо получить JWT токен. Для этого необходимо воспользоваться формой [auth_api.json](json_api_example/auth_api.json). С каждым следующим запросом необходимо будет добавлять свой токен для аутентификации. У токена есть время жизни(10 минут бездействия), после этого его необходимо будет заново получить. Со всеми формами API вы можете познакомиться в [json_api_example](json_api_example).

## Запуск
Проект собирается и запускается с помощью CMake. Сборка и запуск реализованы в файле ./start.sh
```sh
    chmod -x ./start.sh
    ./start.sh
```

## Автор
- [Киселев Павел](https://t.me/kiselpd) — Back-End Developer